webpackJsonp([1],{"0DEJ":function(t,s){},CxrX:function(t,s){},MJPr:function(t,s){},NHnr:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("7+uW");window.bigInt=a("hsXF"),window.numeral=a("ViqS");var i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]},n=a("VU/8")({name:"app"},i,!1,function(t){a("0DEJ"),a("CxrX"),a("Ujcr")},null,null).exports,o=a("/ocq"),c=a("mvHQ"),r=a.n(c),l=a("woOf"),d=a.n(l),u={name:"Home",data:function(){return{money:window.bigInt(),endpoint:"https://app-6ed8f5ca-03ad-43e9-9366-bf87b695ff01.cleverapps.io",clickCounter:0,timer:"",ws:{},assets:[],totalRate:0,showAssetsModal:!1,maxIterator:0,showUpgradesModal:!1,fundRaise:{BasePrice:0,number:0,price:0}}},methods:{computeClick:function(){return Math.ceil(this.totalRate/100*this.fundRaise.number+1)},refreshUpgrades:function(){var t=this;fetch(this.endpoint+"/api/v0/upgrade").then(function(t){return t.json()}).then(function(s){t.fundRaise=s})},refreshAssets:function(){var t=this;console.log("refreshing assets..."),fetch(this.endpoint+"/api/v0/assets").then(function(t){return t.json()}).then(function(s){t.assets=s.sort(function(t,s){var a=t.id,e=s.id;return a<e?-1:a>e?1:0});var a=t.assets.map(function(t){d()({},t);return t.rate*t.number});t.totalRate=a.reduce(function(t,s){return t+s});for(var e=0;e<t.assets.length;e++)if(0==t.assets[e].number){t.maxIterator=e+1;break}})},upgrade:function(){console.log("Buying an upgrade"),fetch(this.endpoint+"/api/v0/upgrade",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}})},buy:function(t){console.log("Buying "+t),fetch(this.endpoint+"/api/v0/assets/"+t,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}),this.refreshAssets()},pushNotification:function(t){this.$toasted.show(t,{theme:"primary",position:"top-right",duration:5e3})},parseMessage:function(t){switch(t.data.split(" ")[1].split("{")[0]){case"fundraising":this.pushNotification("an fundraising has been made!"),this.refreshUpgrades();break;case"money":var s=t.data.split(" ")[2];this.money=window.bigInt(s);break;case"asset":console.log(t.data);var a="";t.data.split(" ")[1].split("{")[1].split("}")[0].split(",").forEach(function(t){t.includes("name=")&&(a=t.split("=")[1])}),this.pushNotification("an "+a+" has been bought!"),this.refreshAssets()}},flushClick:function(){this.clickCounter>0&&(fetch(this.endpoint+"/api/v0/money",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:r()({click:this.clickCounter})}),this.clickCounter=0)}},created:function(){this.refreshAssets(),this.refreshUpgrades(),this.ws=new WebSocket("wss://warp.pierrezemb.org/api/v0/plasma"),this.ws.addEventListener("open",function(t){this.send("SUBSCRIBE DlkMIXbwIKIw9Q25BP.o4G7zDibiURUEc1ATjqah2rNQgMys2SbuoXEwG6nPaCi5K61LhtnXRKSjt3EavUJW84r9FG.O1bo6upi.WrKDEj2fQ0hwto4tYk ~.*{} SUBSCRIPTIONS")}),this.ws.addEventListener("message",this.parseMessage),this.timer=setInterval(this.flushClick,1e3)}},v={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column",on:{click:function(s){t.connectWS()}}},[e("h1",{staticClass:"centered"},[t._v(t._s(t.money.valueOf().toLocaleString())+" euros")]),t._v(" "),e("h4",[t._v(t._s(t.computeClick())+" euros/clic")]),t._v(" "),e("h4",[t._v(t._s(t.totalRate.toLocaleString())+" euros/sec")])])]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("a",{attrs:{href:"#"}},[e("img",{staticClass:"money centered img-responsive",attrs:{src:a("lYLx")},on:{click:function(s){t.clickCounter+=1,t.money=t.money.add(t.computeClick())}}})])])])]),t._v(" "),e("div",{staticClass:"modal",class:{active:t.showAssetsModal},attrs:{id:"modal-id"}},[e("a",{staticClass:"modal-overlay",attrs:{href:"#","aria-label":"Close"},on:{click:function(s){t.showAssetsModal=!1}}}),t._v(" "),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{href:"#","aria-label":"Close"},on:{click:function(s){t.showAssetsModal=!1}}}),t._v(" "),e("div",{staticClass:"modal-title h5"},[t._v("Buy assets ("+t._s(t.money.valueOf().toLocaleString())+" euros available)")])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},t._l(t.assets,function(s,a){return a<t.maxIterator?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("div",{staticClass:"card-title h5",attrs:{"data-badge":""+s.number}},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"card-subtitle text-gray"},[t._v("Base profit: "+t._s(s.rate.toLocaleString())+" euros/sec")]),t._v(" "),e("div",{staticClass:"card-subtitle text-gray"},[t._v("Total: "+t._s((s.rate*s.number).toLocaleString())+" euros/sec")])]),t._v(" "),e("div",{staticClass:"card-body"},[t._v("\n              "+t._s(s.description)+"\n            ")]),t._v(" "),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn badge float-right",class:{disabled:s.price>t.money,"btn-success":s.price<t.money},attrs:{"data-badge":""+s.number},on:{click:function(a){t.buy(s.label)}}},[t._v("Buy for "+t._s(s.price.toLocaleString())+" euros")])])]):t._e()}))]),t._v(" "),e("div",{staticClass:"modal-footer"},[t._v("\n        ...\n      ")])])]),t._v(" "),e("div",{staticClass:"modal",class:{active:t.showUpgradesModal},attrs:{id:"modal-id"}},[e("a",{staticClass:"modal-overlay",attrs:{href:"#","aria-label":"Close"},on:{click:function(s){t.showUpgradesModal=!1}}}),t._v(" "),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{href:"#","aria-label":"Close"},on:{click:function(s){t.showUpgradesModal=!1}}}),t._v(" "),e("div",{staticClass:"modal-title h5"},[t._v("Fundraise ("+t._s(t.money.valueOf().toLocaleString())+" euros available)")])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[t._v("\n              c\n            ")]),t._v(" "),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn badge float-right",class:{disabled:t.fundRaise.price>t.money,"btn-success":t.fundRaise.price<t.money},attrs:{"data-badge":""+t.fundRaise.number},on:{click:function(s){t.upgrade()}}},[t._v("Buy for "+t._s(t.fundRaise.price.toLocaleString())+" euros")])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[t._v("\n        ...\n      ")])])]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column col-2 col-mx-auto"},[e("button",{staticClass:"btn btn-success",on:{click:function(s){t.showAssetsModal=!0}}},[t._v("Buy assets")])]),t._v(" "),e("div",{staticClass:"column col-2 col-mx-auto"},[e("button",{staticClass:"btn btn-success",on:{click:function(s){t.showUpgradesModal=!0}}},[t._v("Do a fundraise")])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title h5"},[this._v("Fundraise")]),this._v(" "),s("div",{staticClass:"card-subtitle text-gray"},[this._v("Clicking gains +1% of your euros/sec")])])}]},h=a("VU/8")(u,v,!1,function(t){a("MJPr")},"data-v-f2d6f73a",null).exports;e.a.use(o.a);var p=new o.a({routes:[{path:"/",name:"Home",component:h}]}),f=a("IZMb"),m=a.n(f);e.a.use(m.a),e.a.config.productionTip=!1,new e.a({el:"#app",router:p,template:"<App/>",components:{App:n}})},Ujcr:function(t,s){},lYLx:function(t,s,a){t.exports=a.p+"startup-clicker/static/img/money.b0316a1.png"}},["NHnr"]);
//# sourceMappingURL=app.970eeb1b1f73f7dd2521.js.map